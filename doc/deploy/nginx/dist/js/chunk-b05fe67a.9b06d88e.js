(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b05fe67a"],{"04c5":function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return d}));var r=n("b775");function o(t){return Object(r["b"])({url:"/admin/v1/oss/upload",method:"post",data:t})}function i(t){return Object(r["b"])({url:"/admin/v1/oss/list",method:"post",data:t})}function a(t){return Object(r["b"])({url:"/admin/v1/oss/"+t,method:"get"})}function u(t,e){return Object(r["b"])({url:"/admin/v1/oss",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8","Request-Id":e}})}function s(t){return Object(r["b"])({url:"/admin/v1/oss",method:"put",data:t})}function d(t){return Object(r["b"])({url:"/admin/v1/oss/"+t,method:"delete"})}},"1f32":function(t,e,n){},"5bd3":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("b775");function o(){return Object(r["b"])({url:"/admin/v1/tokens",method:"get"})}},"6e80":function(t,e,n){"use strict";n("1f32")},"754c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("page-header-wrapper",{on:{back:t.back},scopedSlots:t._u([{key:"breadcrumb",fn:function(){return[t._v(" "+t._s(t.formTitle)+" ")]},proxy:!0},{key:"title",fn:function(){return[t._v(" "+t._s(t.formTitle)+" ")]},proxy:!0},{key:"content",fn:function(){},proxy:!0},{key:"extraContent",fn:function(){},proxy:!0},{key:"extra",fn:function(){return[n("a-space",[n("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitForm}},[t._v(" 确定 ")]),n("a-button",{attrs:{type:"dashed",loading:t.submitLoading},on:{click:function(e){return t.back()}}},[t._v(" 取消 ")])],1)]},proxy:!0}])},[n("a-card",{attrs:{bordered:!1}},[n("a-row",{attrs:{gutter:12}},[n("a-col",{attrs:{span:24}},[n("a-form-model",{ref:"baseForm",attrs:{model:t.form,rules:t.baseRules,"wrapper-col":t.wrapperCol}},[n("a-form-model-item",{attrs:{prop:"title"}},[n("a-input",{attrs:{size:"large",placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),n("a-form-model-item",{attrs:{prop:"content"}},[n("mavon-editor",{ref:"content",attrs:{placeholder:"请输入内容",toolbars:t.toolbars,ishljs:!0,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle},on:{imgAdd:t.imgAdd},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),n("a-form-model-item",{attrs:{prop:"receiver"}},[n("a-select",{attrs:{mode:"multiple",placeholder:"请选择"},model:{value:t.form.receiver,callback:function(e){t.$set(t.form,"receiver",e)},expression:"form.receiver"}},t._l(t.userOptions,(function(e,r){return n("a-select-option",{key:r,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1)],1)],1)],1)],1)],1)},o=[],i=(n("d3b7"),n("c78a")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"editor",staticClass:"editor",attrs:{id:"editor"}})])},u=[],s=(n("a9e3"),n("8ded")),d=n.n(s),c=n("9fb0"),l=n("6fad"),f=n.n(l),m=n("1487"),p=n.n(m),h={name:"Editor",components:{},props:{value:{type:String,default:""},height:{type:Number,default:null},readOnly:{type:Boolean,default:!1},fileSize:{type:Number,default:1024},imageSize:{type:Number,default:5},videoSize:{type:Number,default:1024}},data:function(){return{uploadImgUrl:"/laokou/common/upload",headers:{Authorization:"Bearer "+d.a.get(c["a"]),Accept:"application/json, text/plain, */*"},editor:null,currentValue:""}},computed:{},watch:{value:{handler:function(t){t!==this.currentValue&&(this.currentValue=null===t?"":t,this.editor&&this.editor.txt.html(this.currentValue))},immediate:!0}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.editor=new f.a("#editor"),this.editor.highlight=p.a,this.height&&(this.editor.config.height=this.height),this.editor.config.zIndex=0,this.editor.config.customAlert=function(e,n){switch(n){case"success":t.$message.success(e);break;case"info":t.$message.info(e);break;case"warning":t.$message.warning(e);break;case"error":t.$message.error(e);break;default:t.$message.info(e);break}},this.editor.config.uploadImgMaxSize=1048576*this.imageSize,this.editor.config.uploadImgServer=this.uploadImgUrl,this.editor.config.uploadImgHeaders=this.headers,this.editor.config.uploadFileName="file",this.editor.config.uploadImgHooks={customInsert:function(t,e){t(e.url)}},this.editor.config.uploadVideoMaxSize=1048576*this.videoSize,this.editor.config.uploadVideoServer=this.uploadImgUrl,this.editor.config.uploadVideoHeaders=this.headers,this.editor.config.uploadVideoName="file",this.editor.config.uploadVideoHooks={customInsert:function(t,e){t(e.url)}},this.editor.config.onchange=function(e){t.currentValue=e,t.$emit("input",e)},this.editor.create(),this.editor.txt.html(this.currentValue),this.readOnly&&this.editor.disable()},handleUploadError:function(){this.$message.error("图片插入失败")}}},b=h,g=n("2877"),v=Object(g["a"])(b,a,u,!1,null,null,null),k=v.exports,O=k,y=n("d5bd"),j=n("04c5"),w=n("5bd3"),x={name:"NoticeForm",components:{Editor:O},data:function(){return{accessToken:"",userOptions:[],toolbars:{strikethrough:!0,subscript:!0,ul:!0,imagelink:!0,table:!0,redo:!0,alignleft:!0,aligncenter:!0,alignright:!0,preview:!0,bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0,link:!0,help:!0,code:!0,subfield:!0,readmodel:!0,undo:!0,trash:!0,save:!0,navigation:!0},labelCol:{span:4},wrapperCol:{span:24},submitLoading:!1,total:0,id:void 0,formTitle:"",statusOptions:[],typeOptions:[],idempotentToken:"",form:{title:"",content:"",receiver:[],type:0},baseRules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}],receiver:[{required:!0,message:"接收人不能为空",trigger:"change"}]}}},filters:{},created:function(){},computed:{prop:function(){return{subfield:!1,defaultOpen:"edit",editable:!0,scrollStyle:!0}}},watch:{},mounted:function(){var t=this;this.formTitle=this.$route.params.formTitle,this.handleAdd(),Object(y["e"])().then((function(e){t.userOptions=e.data}))},methods:{token:function(){var t=this;Object(w["a"])().then((function(e){t.accessToken=e.data.token}))},imgAdd:function(t,e){var n=this,r=new FormData;r.append("file",e),Object(j["f"])(r).then((function(e){n.$refs.content.$img2Url(t,e.data.url)}))},reset:function(){this.form={title:"",content:"",receiver:[],type:0}},handleAdd:function(){this.reset(),this.token(),this.formTitle="新增消息"},submitForm:function(){var t=this;this.$refs.baseForm.validate((function(e){if(!e)return!1;t.submitLoading=!0;var n={messageCO:t.form};Object(i["d"])(n,t.accessToken).then((function(){t.$message.success("发送成功",3),t.back()})).catch((function(){t.token()})).finally((function(){t.submitLoading=!1}))}))},back:function(){this.reset(),this.token(),this.$router.push("/v1/messages/view")}}},$=x,S=(n("6e80"),Object(g["a"])($,r,o,!1,null,"4ad3d93d",null));e["default"]=S.exports},d5bd:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return d})),n.d(e,"j",(function(){return c})),n.d(e,"i",(function(){return l})),n.d(e,"k",(function(){return f})),n.d(e,"e",(function(){return m})),n.d(e,"g",(function(){return p}));var r=n("b775");function o(t){return Object(r["b"])({url:"/admin/v1/users/list",method:"post",data:t})}function i(t){return Object(r["b"])({url:"/admin/v1/users/"+t,method:"get"})}function a(t,e){return Object(r["b"])({url:"/admin/v1/users",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8","Request-Id":e}})}function u(t){return Object(r["b"])({url:"/admin/v1/users",method:"put",data:t})}function s(t){return Object(r["b"])({url:"/admin/v1/users/"+t,method:"delete"})}function d(t){return Object(r["b"])({url:"/admin/v1/users/reset-password",method:"put",data:t})}function c(t){return Object(r["b"])({url:"/admin/v1/users/status",data:t,method:"put"})}function l(t){return Object(r["b"])({url:"/admin/v1/users/profile",method:"put",data:t})}function f(t){return Object(r["b"])({url:"/admin/v1/oss/upload",method:"post",data:t})}function m(){return Object(r["b"])({url:"/admin/v1/users/option-list",method:"get"})}function p(t){return Object(r["b"])({url:"/admin/v1/users/password",data:t,method:"put"})}}}]);