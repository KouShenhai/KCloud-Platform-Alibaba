(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e946"],{d5ba:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-header-wrapper",[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["users:online-list"],expression:"['users:online-list']"}],attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"用户名"}},[a("a-input",{attrs:{placeholder:"请输入用户名","allow-clear":""},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleQuery}},[a("a-icon",{attrs:{type:"search"}}),e._v("查询")],1),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.resetQuery}},[a("a-icon",{attrs:{type:"redo"}}),e._v("重置")],1)],1)])],1)],1)],1),a("div",{staticClass:"table-operations"},[a("table-setting",{style:{float:"right"},attrs:{"table-size":e.tableSize,"refresh-loading":e.loading},on:{"update:tableSize":function(t){e.tableSize=t},"update:table-size":function(t){e.tableSize=t},refresh:e.getList},model:{value:e.columns,callback:function(t){e.columns=t},expression:"columns"}})],1),a("a-table",{attrs:{loading:e.loading,size:e.tableSize,rowKey:"tokenId",columns:e.columns,"data-source":e.list,pagination:!1,bordered:e.tableBordered},scopedSlots:e._u([{key:"operation",fn:function(t,n){return a("span",{},[a("a-popconfirm",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["users:kill-online"],expression:"['users:kill-online']"}],attrs:{"ok-text":"是","cancel-text":"否"},on:{confirm:function(t){return e.confirmHandleForceLogout(n)},cancel:function(t){return e.cancelHandleForceLogout(n)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("确认强制踢出 "),a("b",[e._v(e._s(n.username))]),e._v(" 吗?")]),a("a",[e._v(" 强退 ")])])],1)}}])}),a("a-pagination",{staticClass:"ant-table-pagination",attrs:{"show-size-changer":"","show-quick-jumper":"",current:e.queryParam.pageNum,total:e.total,"page-size":e.queryParam.pageSize,showTotal:function(){return"共 "+e.total+" 条"}},on:{showSizeChange:e.onShowSizeChange,change:e.changeSize}})],1)],1)},i=[],r=a("b775");function s(e){return Object(r["b"])({url:"/admin/v1/users/online-list",method:"post",data:e})}function o(e){return Object(r["b"])({url:"/admin/v1/users/kill-online",data:{token:e},method:"delete"})}var l=a("435a"),u={name:"Online",components:{},mixins:[l["a"]],data:function(){return{list:[],loading:!1,total:0,multiple:!0,queryParam:{pageNum:1,pageSize:10,username:""},columns:[{title:"令牌",dataIndex:"token",ellipsis:!0,align:"center"},{title:"用户名",dataIndex:"username",align:"center"},{title:"登录地址",dataIndex:"loginIp",ellipsis:!0,align:"center"},{title:"登录时间",dataIndex:"loginDate",align:"center"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},align:"center"}]}},filters:{},created:function(){this.getList()},computed:{},watch:{},methods:{getList:function(){var e=this;this.loading=!0,s(this.queryParam).then((function(t){e.list=t.data.records,e.total=t.data.total-0,e.loading=!1}))},handleQuery:function(){this.queryParam.pageNum=1,this.getList()},resetQuery:function(){this.dateRange=[],this.queryParam={pageNum:1,pageSize:10,username:""},this.handleQuery()},onShowSizeChange:function(e,t){this.queryParam.pageSize=t,this.getList()},changeSize:function(e,t){this.queryParam.pageNum=e,this.queryParam.pageSize=t,this.getList()},confirmHandleForceLogout:function(e){var t=this;o(e.token).then((function(){t.getList(),t.$message.success("已强退踢出",3)})).catch((function(){this.$message.error("发生异常",3)}))},cancelHandleForceLogout:function(e){}}},c=u,d=a("2877"),m=Object(d["a"])(c,n,i,!1,null,null,null);t["default"]=m.exports}}]);