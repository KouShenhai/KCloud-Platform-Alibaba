(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12ce66b4","chunk-59c0c011","chunk-70e25058","chunk-2045b2b7"],{"33e6":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:24,lg:16}},[a("a-form-model",{ref:"form",attrs:{layout:"vertical",rules:t.rules,model:t.user}},[a("a-form-model-item",{attrs:{label:"手机",prop:"mobile"}},[a("a-input",{attrs:{placeholder:"请填写手机号"},model:{value:t.user.mobile,callback:function(e){t.$set(t.user,"mobile",e)},expression:"user.mobile"}})],1),a("a-form-model-item",{attrs:{label:"电子邮箱",prop:"mail"}},[a("a-input",{attrs:{placeholder:"请填写电子邮箱"},model:{value:t.user.mail,callback:function(e){t.$set(t.user,"mail",e)},expression:"user.mail"}})],1),a("a-form-model-item",[a("a-button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v("保存")])],1)],1)],1),a("a-col",{staticStyle:{"padding-left":"100px"},style:{minHeight:"180px"},attrs:{md:24,lg:8}},[a("a-upload",{attrs:{name:"file","max-count":1,"before-upload":t.beforeUpload,showUploadList:!1},on:{change:t.uploadImg}},[a("div",{staticClass:"ant-upload-preview"},[a("a-icon",{staticClass:"upload-icon",attrs:{type:"cloud-upload-o"}}),a("div",{staticClass:"mask"},[a("a-icon",{attrs:{type:"plus"}})],1),a("img",{attrs:{src:t.user.avatar}})],1)])],1)],1)],1)},n=[],s=a("5530"),i=(a("d3b7"),a("d5bd")),o=a("5880"),u=a("d2eb"),c={name:"BaseSettings",components:{},data:function(){return{submitLoading:!1,user:{id:"",mail:"",mobile:"",avatar:"",username:"",status:0},preview:{},rules:{mail:[{required:!0,message:"电子邮箱不能为空",trigger:"blur"},{type:"email",message:"请正确填写邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,message:"手机号不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请正确填写手机号",trigger:"blur"}]}}},computed:Object(s["a"])({},Object(o["mapGetters"])(["id"])),mounted:function(){this.getInfo()},methods:{uploadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),Object(i["k"])(a).then((function(t){e.user.avatar=t.data.url}))},beforeUpload:function(){return!1},getInfo:function(){var t=this;Object(u["b"])().then((function(e){t.user.mail=e.data.mail,t.user.id=e.data.id,t.user.mobile=e.data.mobile,t.user.avatar=e.data.avatar,t.user.username=e.data.username}))},submit:function(){var t=this;this.$refs.form.validate((function(e){if(e){t.submitLoading=!0;var a={userProfileCO:t.user};Object(i["i"])(a).then((function(){t.$notification.success({message:"提示",description:"修改成功,请退出登录后生效"})})).finally((function(){t.submitLoading=!1}))}}))}}},l=c,d=(a("f53c"),a("2877")),m=Object(d["a"])(l,r,n,!1,null,"64206aa8",null);e["default"]=m.exports},"55ca":function(t,e,a){"use strict";a("8b88")},"5a2b":function(t,e,a){},"8b88":function(t,e,a){},a9a9:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-list",{attrs:{itemLayout:"horizontal",dataSource:t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e,r){return a("a-list-item",{key:r},[a("a-list-item-meta",[a("a",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))]),a("span",{attrs:{slot:"description"},slot:"description"},[a("span",{staticClass:"security-list-description"},[t._v(t._s(e.description))]),e.value?a("span",[t._v(" : ")]):t._e(),a("span",{staticClass:"security-list-value"},[t._v(t._s(e.value))])])]),e.actions?[a("a",{attrs:{slot:"actions"},on:{click:e.actions.callback},slot:"actions"},[t._v(t._s(e.actions.title))])]:t._e()],2)}}])}),a("update-password",{ref:"updatePassword"})],1)},n=[],s=a("be79"),i={name:"SecuritySettings",components:{UpdatePassword:s["default"]},data:function(){var t=this;return{data:[{title:"账户密码",description:"当前密码强度",value:"强",actions:{title:"修改",callback:function(){t.$refs.updatePassword.handleUpdatePwd()}}}]}}},o=i,u=a("2877"),c=Object(u["a"])(o,r,n,!1,null,"fee8d12a",null);e["default"]=c.exports},be79:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,visible:t.open,"confirm-loading":t.submitLoading},on:{ok:t.submitForm,cancel:t.cancel}},[a("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("a-form-model-item",{attrs:{"has-feedback":"",label:"新密码",prop:"newPassword"}},[a("a-input-password",{attrs:{placeholder:"请输入新密码",maxLength:20},model:{value:t.form.newPassword,callback:function(e){t.$set(t.form,"newPassword",e)},expression:"form.newPassword"}})],1),a("a-form-model-item",{attrs:{"has-feedback":"",label:"确认密码",prop:"confirmPassword"}},[a("a-input-password",{attrs:{placeholder:"请确认密码",maxLength:20},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1)],1)],1)},n=[],s=a("5530"),i=(a("ac1f"),a("d3b7"),a("d5bd")),o=a("5880"),u={props:{},data:function(){var t=this,e=function(e,a,r){""===a?r(new Error("请输入新密码")):/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$)([^\u4e00-\u9fa5\s]){5,20}$/.test(a)?(""!==t.form.confirmPassword&&t.$refs.form.validateField("confirmPassword"),r()):r(new Error("请输入5-20位英文字母、数字或者符号（除空格），且字母、数字和标点符号至少包含两种"))},a=function(e,a,r){""===a?r(new Error("请再次输入新密码确认")):a!==t.form.newPassword?r(new Error("两次输入的密码不一致")):r()};return{submitLoading:!1,title:"重置密码",open:!1,childrenDrawer:!1,formLayout:"horizontal",form:{newPassword:void 0,confirmPassword:void 0},rules:{newPassword:[{required:!0,validator:e,trigger:"change"}],confirmPassword:[{required:!0,validator:a,trigger:"change"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}}}},computed:Object(s["a"])({},Object(o["mapGetters"])(["id"])),methods:{cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={newPassword:void 0,confirmPassword:void 0}},handleUpdatePwd:function(){this.open=!0},submitForm:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return!1;t.submitLoading=!0;var a={id:t.id,password:t.form.newPassword};Object(i["g"])(a).then((function(){t.$message.success("修改成功",3),t.open=!1})).finally((function(){t.submitLoading=!1,t.reset()}))}))}}},c=u,l=a("2877"),d=Object(l["a"])(c,r,n,!1,null,null,null);e["default"]=d.exports},c504:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{style:{height:"100%"},attrs:{bordered:!1,bodyStyle:{padding:"16px 0",height:"100%"}}},[a("div",{staticClass:"account-settings-info-main",class:{mobile:t.isMobile}},[a("div",{staticClass:"account-settings-info-left"},[a("a-menu",{style:{border:"0",width:t.isMobile?"560px":"auto"},attrs:{mode:t.isMobile?"horizontal":"inline",type:"inner"},model:{value:t.currentKey,callback:function(e){t.currentKey=e},expression:"currentKey"}},[a("a-menu-item",{key:"base"},[t._v(" 基本设置 ")]),a("a-menu-item",{key:"security"},[t._v(" 安全设置 ")])],1)],1),a("div",{staticClass:"account-settings-info-right"},[a("div",{staticClass:"account-settings-info-title"},[a("span",[t._v(t._s(t.currentKey.indexOf("base")>-1?"基本设置":"安全设置"))])]),t.currentKey.indexOf("base")>-1?a("base-setting"):t._e(),t.currentKey.indexOf("security")>-1?a("security"):t._e()],1)])])],1)},n=[],s=a("432b"),i=a("a9a9"),o=a("33e6"),u={name:"Settings",components:{Security:i["default"],BaseSetting:o["default"]},mixins:[s["a"]],data:function(){return{mode:"inline",currentKey:["base"]}},mounted:function(){},methods:{},watch:{}},c=u,l=(a("55ca"),a("2877")),d=Object(l["a"])(c,r,n,!1,null,"136444a6",null);e["default"]=d.exports},d5bd:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return i})),a.d(e,"h",(function(){return o})),a.d(e,"a",(function(){return u})),a.d(e,"f",(function(){return c})),a.d(e,"j",(function(){return l})),a.d(e,"i",(function(){return d})),a.d(e,"k",(function(){return m})),a.d(e,"e",(function(){return f})),a.d(e,"g",(function(){return p}));var r=a("b775");function n(t){return Object(r["b"])({url:"/admin/v1/users/list",method:"post",data:t})}function s(t){return Object(r["b"])({url:"/admin/v1/users/"+t,method:"get"})}function i(t,e){return Object(r["b"])({url:"/admin/v1/users",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8","Request-Id":e}})}function o(t){return Object(r["b"])({url:"/admin/v1/users",method:"put",data:t})}function u(t){return Object(r["b"])({url:"/admin/v1/users/"+t,method:"delete"})}function c(t){return Object(r["b"])({url:"/admin/v1/users/reset-password",method:"put",data:t})}function l(t){return Object(r["b"])({url:"/admin/v1/users/status",data:t,method:"put"})}function d(t){return Object(r["b"])({url:"/admin/v1/users/profile",method:"put",data:t})}function m(t){return Object(r["b"])({url:"/admin/v1/oss/upload",method:"post",data:t})}function f(){return Object(r["b"])({url:"/admin/v1/users/option-list",method:"get"})}function p(t){return Object(r["b"])({url:"/admin/v1/users/password",data:t,method:"put"})}},f53c:function(t,e,a){"use strict";a("5a2b")}}]);